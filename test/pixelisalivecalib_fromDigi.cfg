process PIXELGAINCALIB = 
{
   untracked PSet maxEvents = {untracked int32 input = -1}
   source = PoolSource { 
	untracked vstring fileNames = { "rfio:/castor/cern.ch/user/f/fblekman/pix_data/GainCalibrations/Digis/GainCalibration20070514b_digi.root" }
   }     



######################################################
#  Read settings from the calibration database 
######################################################

   include "CondCore/DBCommon/data/CondDBCommon.cfi"
# name of the database 
   replace CondDBCommon.connect = "sqlite_file:/afs/cern.ch/cms/Tracker/Pixel/configuration/TestDatabase.db"
   replace CondDBCommon.timetype = "runnumber"
   replace CondDBCommon.DBParameters.messageLevel = 0
   replace CondDBCommon.DBParameters.authenticationPath="."
   es_source = PoolDBESSource {
	using CondDBCommon
	VPSet toGet = { { 
			string record = "SiPixelCalibConfigurationRcd"
			# change the tag appropriately. Look at /afs/cern.ch/cms/Tracker/Pixel/configuration/TestDatabase.txt for existing tag names.
			string tag = "HC-Z1_HD1_B01_02_03_Alive_23Aug07_1857"
			} }
   }

#############################################

  service = TFileService {    string fileName = "histogramsPixelAlive_fromDigi.root" }

   # Message Logger
#   include "FWCore/MessageLogger/data/MessageLogger.cfi"
#   or use your own 
   service = MessageLogger {	
	untracked vstring destinations = {"cout"}
	untracked PSet cout = {untracked string threshold = "ERROR"}
   }


  # Pixel Cabling Map from DataBase
  include "CalibTracker/Configuration/data/SiPixel_TIFCabling.cff"

#include the geometry
   include "Geometry/TrackerSimData/data/trackerSimGeometryXML.cfi"
   include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
   include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"


   include "CalibTracker/SiPixelIsAliveCalibration/data/SiPixelIsAliveCalibration.cfi"
   replace SiPixelIsAliveCalibration.src = "siPixelDigis"
 	
	
   # module execution
   path p = { SiPixelIsAliveCalibration }


#  module print = AsciiOutputModule {}
#  endpath ep = { print }
   # Timing service
#    service = Timing {}

}
